# profiles - Intersight UCS Profiles and Deployment Module

## Use this module to create UCS Profiles in Intersight

## Usage

```hcl
module "profiles" {

  source = "terraform-cisco-modules/easy-imm/intersight//modules/profiles"

  # omitted...
}
```

This module will create UCS Profiles (Chassis, Domain, Servers), in Intersight.  

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_intersight"></a> [intersight](#requirement\_intersight) | >=1.0.21 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_intersight"></a> [intersight](#provider\_intersight) | 1.0.21 |
| <a name="provider_terraform"></a> [terraform](#provider\_terraform) | n/a |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [intersight_chassis_profile.ucs_chassis_profiles](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/resources/chassis_profile) | resource |
| [intersight_server_profile.ucs_server_profiles](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/resources/server_profile) | resource |
| [intersight_compute_physical_summary.server](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/compute_physical_summary) | data source |
| [intersight_equipment_chassis.chassis](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/equipment_chassis) | data source |
| [intersight_organization_organization.org_moid](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/organization_organization) | data source |
| [terraform_remote_state.local_policies](https://registry.terraform.io/providers/hashicorp/terraform/latest/docs/data-sources/remote_state) | data source |
| [terraform_remote_state.local_pools](https://registry.terraform.io/providers/hashicorp/terraform/latest/docs/data-sources/remote_state) | data source |
| [terraform_remote_state.remote_policies](https://registry.terraform.io/providers/hashicorp/terraform/latest/docs/data-sources/remote_state) | data source |
| [terraform_remote_state.remote_pools](https://registry.terraform.io/providers/hashicorp/terraform/latest/docs/data-sources/remote_state) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_apikey"></a> [apikey](#input\_apikey) | Intersight API Key. | `string` | n/a | yes |
| <a name="input_endpoint"></a> [endpoint](#input\_endpoint) | Intersight URL. | `string` | `"https://intersight.com"` | no |
| <a name="input_organization"></a> [organization](#input\_organization) | Intersight Organization Names to Apply Policy to.  https://intersight.com/an/settings/organizations/. | `string` | `"default"` | no |
| <a name="input_secretkey"></a> [secretkey](#input\_secretkey) | Intersight Secret Key. | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | List of Key/Value Pairs to Assign as Attributes to the Policy. | `list(map(string))` | `[]` | no |
| <a name="input_tfc_workspaces"></a> [tfc\_workspaces](#input\_tfc\_workspaces) | * backend: Options are:<br>  - local - The backend is on the Local Machine<br>  - Remote - The backend is in TFCB.<br>* tfc\_organization: Name of the Terraform Cloud Organization when backend is remote.<br>* policies\_dir: Name of the Policies directory when the backend is local.<br>* policies\_ws: Name of the Policies workspace in Terraform Cloud.<br>* pools\_dir: Name of the Pools directory when the backend is local.<br>* pools\_ws: Name of the Pools workspace in Terraform Cloud. | <pre>list(object(<br>    {<br>      backend          = string<br>      tfc_organization = optional(string)<br>      policies_dir     = optional(string)<br>      policies_ws      = optional(string)<br>      pools_dir        = optional(string)<br>      pools_ws         = optional(string)<br>    }<br>  ))</pre> | <pre>[<br>  {<br>    "backend": "remote",<br>    "policies_dir": "../policies/",<br>    "policies_ws": "default_policies",<br>    "pools_dir": "../pools/",<br>    "pools_ws": "default_pools",<br>    "tfc_organization": "default"<br>  }<br>]</pre> | no |
| <a name="input_ucs_chassis_profiles"></a> [ucs\_chassis\_profiles](#input\_ucs\_chassis\_profiles) | key - Name for the Chassis.<br>* action - Action to Perform on the Chassis Profile Assignment.  Options are:<br>  - Deploy<br>  - No-op<br>  - Unassign<br>* assign\_chassis - Set flag to True to Assign the Profile to a Physical Chassis Serial Number.<br>* description - Description for the Profile.<br>* imc\_access\_policy - Name of the IMC Access Policy to Assign.<br>* power\_policy - Name of the Power Policy to Assign.<br>* serial\_number - Serial Number of the Chassis to Assign.<br>* snmp\_policy - Name of the SNMP Policy to Assign.<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy.<br>* target\_platform - The platform for which the chassis profile is applicable. It can either be a chassis that is operating in standalone mode or which is attached to a Fabric Interconnect managed by Intersight.<br>  - FIAttached - Chassis which are connected to a Fabric Interconnect that is managed by Intersight.<br>* thermal\_policy - Name of the Thermal Policy to Assign.<br>* wait\_for\_completion - | <pre>map(object(<br>    {<br>      action              = optional(string)<br>      assign_chassis      = optional(bool)<br>      description         = optional(string)<br>      imc_access_policy   = optional(string)<br>      power_policy        = optional(string)<br>      serial_number       = optional(string)<br>      snmp_policy         = optional(string)<br>      target_platform     = optional(string)<br>      thermal_policy      = optional(string)<br>      tags                = optional(list(map(string)))<br>      wait_for_completion = optional(bool)<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "action": "No-op",<br>    "assign_chassis": false,<br>    "description": "",<br>    "imc_access_policy": "",<br>    "power_policy": "",<br>    "serial_number": "",<br>    "snmp_policy": "",<br>    "tags": [],<br>    "target_platform": "FIAttached",<br>    "thermal_policy": "",<br>    "wait_for_completion": false<br>  }<br>}</pre> | no |
| <a name="input_ucs_server_profile_templates"></a> [ucs\_server\_profile\_templates](#input\_ucs\_server\_profile\_templates) | key - Name of the UCS Server Profile Template<br>* adapter\_configuration\_policy - Name of the Adapter Configuration Policy to assign to the Template.<br>* bios\_policy - Name of the BIOS Policy to assign to the Template.<br>* boot\_order\_policy - Name of the Boot Order Policy to assign to the Template.<br>* certificate\_management\_policy - Name of the Certificate Management Policy to assign to the Template.<br>* description - Description to Assign to the Profile.<br>* device\_connector\_policy - Name of the Device Connector Policy to assign to the Template.<br>* imc\_access\_policy - Name of the IMC Access Policy to assign to the Template.<br>* ipmi\_over\_lan\_policy - Name of the IPMI over LAN Policy to assign to the Template.<br>* lan\_connectivity\_policy - Name of the LAN Connectivity Policy to assign to the Template.<br>* ldap\_policy - Name of the LDAP Policy to assign to the Template.<br>* local\_user\_policy - Name of the Local Users Policy to assign to the Template.<br>* network\_connectivity\_policy - Name of the Network Connectivity Policy to assign to the Template.<br>* ntp\_policy - Name of the NTP Policy to assign to the Template.<br>* operating\_system - Operating System to Install on the Server.  Options are:<br>  - Linux<br>  - VMware - (Default)<br>  - Windows<br>* persistent\_memory\_policy - Name of the Persistent Memory Policy to assign to the Template.<br>* power\_policy - Name of the Power Policy to assign to the Template.<br>* san\_connectivity\_policy - Name of the SAN Connectivity Policy to assign to the Template.<br>* sd\_card\_policy - Name of the SD Card Policy to assign to the Template.<br>* serial\_over\_lan\_policy - Name of the Serial over LAN Policy to assign to the Template.<br>* smtp\_policy - Name of the SMTP Policy to assign to the Template.<br>* snmp\_policy - Name of the SNMP Policy to assign to the Template.<br>* ssh\_policy - Name of the SSH Policy to assign to the Template.<br>* storage\_policy - Name of the Storage Policy to assign to the Template.<br>* syslog\_policy - Name of the Syslog Policy to assign to the Template.<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy.<br>* target\_platform - The platform for which the server profile is applicable. It can either be a server that is operating in standalone mode or which is attached to a Fabric Interconnect managed by Intersight.<br>  - FIAttached - (Default) - Servers which are connected to a Fabric Interconnect that is managed by Intersight.<br>  - Standalone - Servers which are operating in standalone mode i.e. not connected to a Fabric Interconnected.<br>* uuid\_pool - Name of a UUID Pool to Assign to the Policy.<br>* virtual\_kvm\_policy - Name of the Virtual KVM Policy to assign to the Template.<br>* virtual\_media\_policy - Name of the Virtual Media Policy to assign to the Template. | <pre>map(object(<br>    {<br>      adapter_configuration_policy  = optional(string)<br>      bios_policy                   = optional(string)<br>      boot_order_policy             = optional(string)<br>      certificate_management_policy = optional(string)<br>      description                   = optional(string)<br>      device_connector_policy       = optional(string)<br>      imc_access_policy             = optional(string)<br>      ipmi_over_lan_policy          = optional(string)<br>      lan_connectivity_policy       = optional(string)<br>      ldap_policy                   = optional(string)<br>      local_user_policy             = optional(string)<br>      network_connectivity_policy   = optional(string)<br>      ntp_policy                    = optional(string)<br>      operating_system              = optional(string)<br>      persistent_memory_policy      = optional(string)<br>      power_policy                  = optional(string)<br>      san_connectivity_policy       = optional(string)<br>      sd_card_policy                = optional(string)<br>      serial_over_lan_policy        = optional(string)<br>      smtp_policy                   = optional(string)<br>      snmp_policy                   = optional(string)<br>      ssh_policy                    = optional(string)<br>      storage_policy                = optional(string)<br>      syslog_policy                 = optional(string)<br>      tags                          = optional(list(map(string)))<br>      uuid_pool                     = optional(string)<br>      target_platform               = optional(string)<br>      virtual_kvm_policy            = optional(string)<br>      virtual_media_policy          = optional(string)<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "adapter_configuration_policy": "",<br>    "bios_policy": "",<br>    "boot_order_policy": "",<br>    "certificate_management_policy": "",<br>    "description": "",<br>    "device_connector_policy": "",<br>    "imc_access_policy": "",<br>    "ipmi_over_lan_policy": "",<br>    "lan_connectivity_policy": "",<br>    "ldap_policy": "",<br>    "local_user_policy": "",<br>    "network_connectivity_policy": "",<br>    "ntp_policy": "",<br>    "operating_system": "VMware",<br>    "persistent_memory_policy": "",<br>    "power_policy": "",<br>    "san_connectivity_policy": "",<br>    "sd_card_policy": "",<br>    "serial_over_lan_policy": "",<br>    "smtp_policy": "",<br>    "snmp_policy": "",<br>    "ssh_policy": "",<br>    "storage_policy": "",<br>    "syslog_policy": "",<br>    "tags": [],<br>    "target_platform": "FIAttached",<br>    "uuid_pool": "",<br>    "virtual_kvm_policy": "",<br>    "virtual_media_policy": ""<br>  }<br>}</pre> | no |
| <a name="input_ucs_server_profiles"></a> [ucs\_server\_profiles](#input\_ucs\_server\_profiles) | key - Name of the UCS Server Profile<br>* action - Action to Perform on the Chassis Profile Assignment.  Options are:<br>  - Deploy<br>  - No-op<br>  - Unassign<br>* adapter\_configuration\_policy - Name of the Adapter Configuration Policy to assign to the Profile.<br>* bios\_policy - Name of the BIOS Policy to assign to the Profile.<br>* boot\_order\_policy - Name of the Boot Order Policy to assign to the Profile.<br>* certificate\_management\_policy - Name of the Certificate Management Policy to assign to the Profile.<br>* description - Description to Assign to the Profile.<br>* device\_connector\_policy - Name of the Device Connector Policy to assign to the Profile.<br>* imc\_access\_policy - Name of the IMC Access Policy to assign to the Profile.<br>* ipmi\_over\_lan\_policy - Name of the IPMI over LAN Policy to assign to the Profile.<br>* lan\_connectivity\_policy - Name of the LAN Connectivity Policy to assign to the Profile.<br>* ldap\_policy - Name of the LDAP Policy to assign to the Profile.<br>* local\_user\_policy - Name of the Local Users Policy to assign to the Profile.<br>* network\_connectivity\_policy - Name of the Network Connectivity Policy to assign to the Profile.<br>* ntp\_policy - Name of the NTP Policy to assign to the Profile.<br>* persistent\_memory\_policy - Name of the Persistent Memory Policy to assign to the Profile.<br>* power\_policy - Name of the Power Policy to assign to the Profile.<br>* resource\_pool - Name of the Server Resource Pool to assign to the Policy.<br>* san\_connectivity\_policy - Name of the SAN Connectivity Policy to assign to the Profile.<br>* sd\_card\_policy - Name of the SD Card Policy to assign to the Profile.<br>* serial\_number - Serial Number of the Physical Server.<br>* serial\_over\_lan\_policy - Name of the Serial over LAN Policy to assign to the Profile.<br>* server\_assignment\_mode - Source of the server assigned to the server profile. Values can be Static, Pool or None. Static is used if a server is attached directly to server profile. Pool is used if a resource pool is attached to server profile. None is used if no server or resource pool is attached to server profile.<br>  - None - No server is assigned to the server profile.<br>  - Pool - Server is assigned from a resource pool.<br>  - Static - Server is directly assigned to server profile using assign server.<br>* smtp\_policy - Name of the SMTP Policy to assign to the Profile.<br>* snmp\_policy - Name of the SNMP Policy to assign to the Profile.<br>* ssh\_policy - Name of the SSH Policy to assign to the Profile.<br>* static\_uuid\_address - The UUID address for the server must include UUID prefix xxxxxxxx-xxxx-xxxx along with the UUID suffix of format xxxx-xxxxxxxxxxxx.  Joined with a "="<br>* storage\_policy - Name of the Storage Policy to assign to the Profile.<br>* syslog\_policy - Name of the Syslog Policy to assign to the Profile.<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy.<br>* target\_platform - The platform for which the server profile is applicable. It can either be a server that is operating in standalone mode or which is attached to a Fabric Interconnect managed by Intersight.<br>  - FIAttached - (Default) - Servers which are connected to a Fabric Interconnect that is managed by Intersight.<br>  - Standalone - Servers which are operating in standalone mode i.e. not connected to a Fabric Interconnected.<br>* uuid\_pool - Name of a UUID Pool to Assign to the Policy.<br>* ucs\_server\_profile\_template - Name of the server template to apply to the server profile.<br>* virtual\_kvm\_policy - Name of the Virtual KVM Policy to assign to the Profile.<br>* virtual\_media\_policy - Name of the Virtual Media Policy to assign to the Profile.<br>* wait\_for\_completion - This model object can trigger workflows. Use this option to wait for all running workflows to reach a complete state. | <pre>map(object(<br>    {<br>      action                        = optional(string)<br>      adapter_configuration_policy  = optional(string)<br>      bios_policy                   = optional(string)<br>      boot_order_policy             = optional(string)<br>      certificate_management_policy = optional(string)<br>      description                   = optional(string)<br>      device_connector_policy       = optional(string)<br>      imc_access_policy             = optional(string)<br>      ipmi_over_lan_policy          = optional(string)<br>      lan_connectivity_policy       = optional(string)<br>      ldap_policy                   = optional(string)<br>      local_user_policy             = optional(string)<br>      network_connectivity_policy   = optional(string)<br>      ntp_policy                    = optional(string)<br>      operating_system              = optional(string)<br>      persistent_memory_policy      = optional(string)<br>      power_policy                  = optional(string)<br>      resource_pool                 = optional(string)<br>      san_connectivity_policy       = optional(string)<br>      sd_card_policy                = optional(string)<br>      serial_number                 = optional(string)<br>      serial_over_lan_policy        = optional(string)<br>      server_assignment_mode        = optional(string)<br>      smtp_policy                   = optional(string)<br>      snmp_policy                   = optional(string)<br>      ssh_policy                    = optional(string)<br>      static_uuid_address           = optional(string)<br>      storage_policy                = optional(string)<br>      syslog_policy                 = optional(string)<br>      tags                          = optional(list(map(string)))<br>      target_platform               = optional(string)<br>      uuid_pool                     = optional(string)<br>      ucs_server_profile_template   = optional(string)<br>      virtual_kvm_policy            = optional(string)<br>      virtual_media_policy          = optional(string)<br>      wait_for_completion           = optional(bool)<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "action": "No-op",<br>    "adapter_configuration_policy": "",<br>    "bios_policy": "",<br>    "boot_order_policy": "",<br>    "certificate_management_policy": "",<br>    "description": "",<br>    "device_connector_policy": "",<br>    "imc_access_policy": "",<br>    "ipmi_over_lan_policy": "",<br>    "lan_connectivity_policy": "",<br>    "ldap_policy": "",<br>    "local_user_policy": "",<br>    "network_connectivity_policy": "",<br>    "ntp_policy": "",<br>    "persistent_memory_policy": "",<br>    "power_policy": "",<br>    "resource_pool": "",<br>    "san_connectivity_policy": "",<br>    "sd_card_policy": "",<br>    "serial_number": "",<br>    "serial_over_lan_policy": "",<br>    "server_assignment_mode": "None",<br>    "smtp_policy": "",<br>    "snmp_policy": "",<br>    "ssh_policy": "",<br>    "static_uuid_address": "",<br>    "storage_policy": "",<br>    "syslog_policy": "",<br>    "tags": [],<br>    "target_platform": "FIAttached",<br>    "ucs_server_profile_template": "",<br>    "uuid_pool": "",<br>    "virtual_kvm_policy": "",<br>    "virtual_media_policy": "",<br>    "wait_for_completion": false<br>  }<br>}</pre> | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_chassis_moids"></a> [chassis\_moids](#output\_chassis\_moids) | n/a |
| <a name="output_server_moids"></a> [server\_moids](#output\_server\_moids) | n/a |
| <a name="output_ucs_chassis_profiles"></a> [ucs\_chassis\_profiles](#output\_ucs\_chassis\_profiles) | n/a |
| <a name="output_ucs_server_profiles"></a> [ucs\_server\_profiles](#output\_ucs\_server\_profiles) | n/a |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
